 <html>
   <head>
      <title>Autobahn Serial2Ws</title>
      <script src="autobahn.min.js"></script>
      <script src="smoothie.js"></script>

      <script>
         var session = null;

         function controlLed(turnOn) {
            session.call("com.myapp.mcu.control_led", [turnOn]);
         }
         function controlLed2(turnOn) {
            session.call("com.myapp.mcu.control_led2", [turnOn]);
         }

         function updateEventCnt() {
            document.getElementById("event-cnt").innerHTML = Math.round(eventCnt/eventCntUpdateInterval) + " events/s";
            eventCnt = 0;
         }

         window.onload = function (){


            // the URL of the WAMP Router (e.g. Crossbar.io)
            //
            var wsuri;
            if (document.location.origin == "file://") {
               wsuri = "ws://localhost:8080/ws";
            } else {
               wsuri = "ws://" + document.location.hostname + ":8080";
            }

            // connect to WAMP server
            //
            var connection = new autobahn.Connection({
               url: wsuri,
               realm: 'realm1'
            });

            connection.onopen = function (new_session) {
               session = new_session;
            };

            connection.open();
         };
     </script>
   </head>
   <body>
      <h1>Autobahn WebSocket: MCU to WS Gateway Demo</h1>

      <h2>Control LED</h2>
      <button onclick="controlLed(false)">LED Off</button>
      <button onclick="controlLed(true)">LED On</button>

      <h2>Control LED 2</h2>
      <button onclick="controlLed2(false)">LED Off</button>
      <button onclick="controlLed2(true)">LED On</button>

   </body>
 </html>
